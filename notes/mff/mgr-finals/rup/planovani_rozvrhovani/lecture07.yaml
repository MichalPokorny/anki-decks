deck: All::Magisterské státnice::Řešení úloh a plánování::Plánování a rozvrhování::Přednáška 7
topic: Čas v plánování
notes:
        # planovani a rozvrhovani lecture07
        -
                uuid: a6f376c3-a402-44d3-a8c2-5425114ff455
                front: Co nám přidává čas do plánování?
                back: >
                        Akce zabírají nějaký čas.<br>
                        Předpoklady můžou být potřeba nejen při startu, ale i v době trvání.
                        <br>
                        Efekty mohou začít platit před koncem akce, být omezeny trváním, opožděné.<br>
                        Efekty se můžou sdružovat.<br>
                        Můžu mít průběžné cíle.
        -
                uuid: b30faf34-e2b9-4588-854e-0d6a72d7da47
                front: Jak modelujeme v plánování čas?
                back: >
                        Čas je spojitá nebo diskrétní množina s tranzitivním a asymetrickým uspořádáním.
        -
                uuid: 488918b1-5ba7-4a62-bd7b-a57ab03a5945
                front: Jaké rozhraní k času budeme při plánování používat?
                back: >
                        Plánování bude používat databázi časových údajů, které
                        updatuje a ptá se na konzistenci.
        -
                uuid: 74aec57b-3cb4-477d-93c2-4e236e22b534
                front: Jaké jsou dva způsoby práce s časem v plánování?
                back: >
                        S časem pracujeme kvalitativně (tj. relativní vztahy),
                        nebo kvantitativně (tj. zajímají nás absolutní hodnoty).
        -
                uuid: 26354eb1-17e7-4c6e-b273-7d675a3b6626
                front: Co nás zajímá v kvalitativním přístupu k času?
                back: >
                        Časové reference: body změny stavových proměnných (okamžiky),
                        časové periody během kterých platí nějaké tvrzení,
                        uspořádání časových referencí
        -
                uuid: bf4e6ce3-7c09-4aac-b56b-a3c49fdaa766
                topic: Algebra okamžiků - kvalitativní čas
                front: Svázání primitivními vztahy, složitější vztahy, operace nad vztahy
                back: >
                        Okamžiky jsou svázány primitivními vztahy [$]<[/$]/[$]>[/$]/[$]=[/$],
                        nebo nějakou jejich množinou.<br>
                        [$]R=\\mathcal{P}(\\{<,>,=\\})[/$]
                        <br>
                        Nad [$]R[/$] jsou definované operace [$]\\cup, \\cap[/$],
                        a [$]\\cdot[/$] pro tranzitivitu:
                        [$][a r_1 b][/$] a [$][b r_2 c][/$] dá [$][a (r_1 \\cdot r_2) c][/$].
        -
                uuid: 49125107-f190-44bf-bfdd-e768f7c7a4ce
                topic: Algebra okamžiků - kvalitativní čas
                front: Kombinace existujících a z tranzitivity odvozených vztahů
                back: >
                        Když [$][t_1 r t_2], [t_1 q t_3], [t_3 s t_2][/$],
                        tak [$][t_1 r\\cap(q\\cdot s) t_2][/$].
        -
                uuid: f147ef21-99f7-46fc-8719-d4b861c1933d
                topic: Algebra intervalů - kvalitativní čas
                front: Primitivní vztahy mezi intervaly
                back: >
                        <ul>
                        <li> x **b**efore y ([$]x^+<y^_[/$])
                        <li> x **m**eets y ([$]x^+=y^-[/$]
                        <li> x **o**verlaps y ([$]x^- < y^- < x^+[/$] a [$]x^+ < y^+[/$])
                        <li> x **d**uring y (celé [$]x[/$] je v [$]y[/$])
                        <li> x **s**tarts / **f**inishes y (x je menší než y a je to první/poslední věc v y)
                        <li> x **e**quals y
                        <li> symetrické vztahy **b'**, **m'**, **o'**, **d'**, **s'**, **f'**
                        </ul>
        -
                uuid: 3c9fe5e9-c686-46bb-b0ae-4b5fb0864837
                topic: Algebra intervalů - kvalitativní čas
                front: Složitější vztahy mezi intervaly
                back: >
                        Složitější vztah je množina možných platných primitivních vztahů.
                        Množinové operace [$]\\cap,\\cup[/$], tranzitivní operace
                        [$]\\cdot[/$].
        -
                uuid: d10ac2d2-a7cc-4953-bcdd-64ca025ca18c
                topic: Algebra intervalů - kvalitativní čas
                front: Kdy je síť podmínek konzistentní? (okamžiky)
                back: >
                        Když jdou přiřadit reálná čísla začátkům a koncům, že všechny vztahy jsou splněny.
        -
                uuid: 2a2d8173-2524-4690-91d1-d5e2c73c15cb
                topic: Algebra intervalů - kvalitativní čas
                front: Kdy je síť podmínek konzistentní? (podmínky)
                back: >
                        Právě když jde přiřadit dvojicím intervalů množinu
                        primitivních vztahů takových,
                        že pro libovolnou trojici platí [$]p_{i,j}\\in p_{i,k}\\cdot p_{k,j}[/$].
        -
                uuid: ff1df585-d008-4449-803c-a51e14609814
                topic: Algebra intervalů - kvalitativní čas
                front: Jakou sílu má PC při řešení konzistence sítě podmínek?
                back: Není to úplná konzistenční technika.
        -
                uuid: 712dae99-02da-485b-b92d-9176d3c25c2a
                topic: Algebra intervalů - kvalitativní čas
                front: Jak těžké je zjišťování konzistence sítě podmínek?
                back: NP-úplné.
        -
                uuid: 6e9ba3d8-cedc-4938-b43f-cbe5ed538e79
                front: Kvantitativní přístup k času - podmínky na okamžiky
                back: >
                        Pro okamžiky [$]t_i,t_j[/$]:<br>
                        Unární: [$]a \\leq t_i \\leq b[/$],
                        binární: [$]a \\leq t_i - t_j \\leq b[/$];
                        <br><br>
                        Binární podmínka mezi [$]t_i,t_j[/$] se píše [$]a,b[/$].
                        Můžeme pracovat s disjunkcemi jednoduchých časových podmínek.
        -
                uuid: 40e930a0-668b-4a1e-8f34-0b369506a4a4
                topic: Simple Temporal Network
                front: Povolené podmínky, operace
                back: >
                        Jenom jednoduché časové podmínky (žádné skládání): [$]r_{ij}=[a_{ij},b_{ij}][/$].<br>
                        Operace: skládání: [$]r_{ij}\\cdot r_{jk}=[a_{ij}+a_{jk},b_{ij}+b_{jk}][/$],
                        průnik: [$]r_{ij}\\cap r'_{ij}=[\\max(a_{ij},a'_{ij}),\\min(b_{ij},b'_{ij})][/$]
        -
                uuid: 412dbc27-b0ef-4508-b39b-956e6c16df9b
                topic: Simple Temporal Network
                front: Algoritmy na konzistenci
                back: >
                        Stačí konzistence po cestě, nebo Floyd-Warshall
                        (na hledání minimální vzdálenosti mezi každou dvojicí).
        -
                uuid: 607a74ca-69e8-4883-a13e-7c16e0aa11f3
                topic: Simple Temporal Network
                front: Path consistency algoritmus
                back: >
                        Konzistence po cestě: spočítám tranzitivní uzávěr
                        binárních relací. Stačí jeden průchod, může fungovat inkrementálně.
                        <br>
                        Pro každé [$]k[/$]:<br>
                        Pro každý další pár [$]i,j[/$]:<br>
                        [$]r_{ij}\\leftarrow r_{ij}\\cap[r_{ik}\\cdot r_{kj}][/$].
                        Když [$]r_{ij}=\\emptyset[/$], fail.
        -
                uuid: e118b2fb-3f24-4d96-8a21-82b9e780fe48
                topic: Simple Temporal Network
                front: Floyd-Warshall
                back: >
                        Floyd-Warshall počítá nejmenší vzdálenost mezi každou dvojicí bodů.<br>
                        Vrcholy [$]i,j[/$] spojí hrana délky [$]b_{ij}[/$],
                        [$]j,i[/$] spojí hrana délky [$]-a_{ij}[/$].
                        STN je konzistentní právě když v grafu nejsou negativní cykly.
                        <br><br>
                        Pro každé [$]i,j,k[/$]:
                        [$]d(i,j)\\leftarrow \\min\\{d(i,j),d(i,k)+d(k,j)\\}[/$]
        -
                uuid: c07cfb1b-5bb9-4a38-b5a6-6a0166690ea3
                front: TCSP. Jak se dá řešit?
                back: >
                        Povolíme disjunkce jednoduchých časových podmínek,
                        [$]\\cdot[/$] a [$]\\cap[/$] se musí provádět s množinami intervalů.
                        <br>
                        Konzistence po cestě nestačí.
                        <br>
                        Síť podmínek rozložím na několik STN, jednu pro každou disjunkci.
                        Výsledek dostanu jako sjednocení řešení těch STN.
        -
                uuid: 860dc614-1dcf-4a07-a16e-14c58b029b77
                front: TNA síť - struktura a otázka
                back: >
                        Je to DAG co má mezi uzly větvící relace. Proces se může
                        rozdělit na paralelní větve (AND), nebo na alternativní větve
                        (OR).
                        Hrana je precedence.
                        <br>
                        Řekneme, že nějaký uzel musí být vybraný (např., konec).
                        Otázka je, jak je těžké najít podgraf, co má tyhle
                        uzly a splňuje podmínky větvení.
        -
                uuid: d30cf5f5-e78c-4d81-b151-6ccd5653e3d4
                front: Složiost rozhodnutí o validitě/nevaliditě v P/A grafu
                back: >
                        Neboli TNA síť. NP-úplný (3-SAT).
        -
                uuid: 02bcb167-8d9d-4c6b-8ae2-0b78556a13d5
                front: Na jakých grafech je TNA výběr uzlů polynomiálně řešitelný?
                back: >
                        Zahnízděné grafy (co jdou zkonstruovat postupnou aplikací dekompoziční operace).
                        <br>
                        Operace:
                        <br>
                        Hrana (a -> b) ==> hrany (a -> c1 -> b), (a -> c2 -> b), ... s novými vrcholy c1, c2, ...<br>
        -
                uuid: b6117756-0abb-4623-a34a-e0614b641c80
                front: (Zahnizdene) temporalni site s alternativami
                back: >
                        Hrana v DAGu je jednoducha temporaln podminka [$]a\\leq Y-X\\leq b[/$].
        -
                uuid: 490b8409-236b-4d49-b9b6-e92a8e9b0892
                front: Složitost globální konzistence temporálních podmínek v zahnízděných sítích
                back: NP-úplná (subset sum)
        # TODO: slaba a silna filtrace, filtrace v CSP modelu s precedencemi (lecture07)
