deck: All::Magisterské státnice::Řešení úloh a plánování::Plánování a rozvrhování::Přednáška 8
topic: Plánování s časem
notes:
        -
                uuid: df26a753-d4a3-4d24-bed1-8c1fd0314a4f
                front: 3 přístupy k plánování s časem
                back: |
                        <ul>
                        <li><i>Časové operátory</i>:
                        popis akce: kdy platí předpoklady,
                        kdy nastanou efekty, a vztahy mezi
                        příslušnými časovými proměnnými
                        <li><i>Kroniky</i>: akce je částečný
                        popis funkce charakterizující stavové proměnné v čase
                        <li><i>Plánovací graf s časem</i>: akce má tři instance
                        (start, střed, konec), stavové vrstvy mají dobu
                        trvání
                        </ul>
        -
                uuid: 0c77b71d-c9dd-48f7-ae60-51d61b7e8114
                front: |
                        Co se přidá k akcím, když čas hraje v plánování
                        důležitou roli?
                back: |
                        Akce: lokální změny parametrů a trvajících podmínek,
                        rozprostředné v čase.
                        <ul>
                        <li>
                        Akce zabírají nějaký časový úsek.
                        <li>
                        Předpoklady platí v časových úsecích.
                        <li>
                        Efekty nastávají někdy.
                        <li>
                        Akce interferují - spojené efekty
                        ("stiskni kliku a zatlač na dveře").
                        <li>
                        Cíle a známé stavy rozprostřené v čase.
                        </ul>
        -
                uuid: d53e77b1-bf38-44dc-9241-0815396b4b4b
                front: Co přidá čas ke stavovým proměnným?
                back: |
                        Závislost na čase:
                        [$]\\mathrm{rloc}:\\mathrm{robot}\\times\\mathrm{time}
                        \\rightarrow\\mathrm{locations}[/$]
        -
                uuid: b8cd1015-3c45-4cf9-baee-3becf783e3a6
                front: Události a trvající okolnosti na stavových proměnných
                back: |
                        V průběhu postupně zpřesňujeme funkci stavové proměnné
                        (podle času). Začneme s dírami. Je to po částech
                        konstantní funkce.
        -
                uuid: 077b1a46-bee0-452a-a4bf-7a45d134ab04
                front: Popis změn na čase závislé stavové proměnné
                markdown: false
                back: |
                        Časovými výroky:
                        <ul>
                        <li>
                        [$]x@t:(v_1,v_2)[/$]: okamžitá změna
                        z [$]v_1[/$] na [$]v_2[/$] v čase [$]t[/$]:
                        <li>
                        [$]x@[t_1,t_2):u[/$]: setrvává v [$][t_1,t_2)[/$] na
                        [$]u[/$]
                        </ul>
        -
                uuid: bdd03319-1c76-408e-9f08-7f74fde750bc
                front: Co je to *kronika*?
                back: |
                        Pro množinu stavových proměnných:
                        [$]\\Phi=(F,C)[/$], kde:
                        <ul>
                        <li> [$]F[/$]: časové výroky nad proměnnými,
                        <li> [$]C[/$]:
                          <ul>
                          <li> Objektové podmínky (vazby proměnných &mdash;
                                [$]x\\in D,x=y,x\\neq y[/$] &mdash;
                                a neměnné relace)
                          <li> Časové podmínky
                                 (< / = / > nad časovými proměnnými)
                          </ul>
                        </ul>
        -
                uuid: 7b62e3b1-c5ab-4273-9835-cf52cc70e4ae
                topic: Kroniky
                front: |
                        Značení: Časové výroky nad proměnnými v kronice
                back: |
                        [$]F[/$]
                include_reverse: true
        -
                uuid: 3eb95add-9fb9-45cb-9048-3f214df7716f
                topic: Kroniky
                front: |
                        Značení: Objektové a časové podmínky v kronice
                back: |
                        [$]C[/$]
                include_reverse: true
        -
                uuid: cefd49fa-91b3-4ad4-bcd9-70a398ac4d9c
                front: Co je to *časová osa*?
                back: Kronika pro jednu stavovou proměnnou
        -
                uuid: 9c30e3fb-d596-4eb4-b2ca-333a17198682
                front: |
                        Co musí platit, aby časová osa specifikovala aspoň
                        jednu funkci?
                back: Nesmí obsahovat dvojici konfliktních časových výroků
        -
                uuid: 1b40779e-60b1-45c4-8df6-39ea5df415f0
                front: Jak zajistíme, aby časová osa neobsahovala konflikty?
                back: |
                        Pro každé 2 časové výroky zajistíme, že bude
                        existovat separační podmínka
        -
                uuid: 360cdb0f-2c8e-4b58-b371-283f23310535
                front: 3 situace pro separační podmínky
                back: |
                        <ul>
                        <li>[$]x@[t_1,t_2):v_1[/$], [$]x@[t_3,t_4):v_2[/$]
                        <li>[$]x@t:(v_1,v_2)[/$], [$]x@[t_1,t_2):v[/$]
                        <li>[$]x@t:(v_1,v_2)[/$], [$]x@t':(v_1',v_2')[/$]
                        </ul>
        -
                uuid: adba8893-01fd-4a9c-8873-2166fa200900
                front: |
                        Separační podmínky pro
                        [$]x@[t_1,t_2):v_1[/$], [$]x@[t_3,t_4):v_2[/$]
                back: |
                        <ol type="a">
                        <li> [$]t_2\leq t_3[/$]
                        <li> [$]t_4\leq t_1[/$]
                        <li> [$]v_1=v_2[/$]
                        </ol>
        -
                uuid: 34106dcd-95f1-4d21-9e67-d112c17cb0ae
                front: |
                        Separační podmínky pro
                        [$]x@t:(v_1,v_2)[/$] a [$]x@[t_1,t_2):v[/$]
                back: |
                        <ol type="a">
                        <li> [$]t<t_1[/$]
                        <li> [$]t_2<t[/$]
                        <li> [$]t_1=t, v=v_2[/$]
                        <li> [$]t_2=t, v=v_1[/$]
                        </ol>
        -
                uuid: 65182af5-5d51-4e62-9094-82445ce4a661
                front: |
                        Separační podmínky pro
                        [$]x@t:(v_1,v_2)[/$], [$]x@t':(v_1',v_2')[/$]
                back: |
                        <ol type="a">
                        <li> [$]t\neq t'[/$]
                        <li> [$]v_1=v_1', v_2=v_2'[/$]
                        </ol>
        -
                uuid: 136cb068-5048-4c9e-a35f-b3780169821a
                front: Jak separovat akce kromě separační podmínky?
                back: |
                        Separováním objektových proměnných &mdash;
                        [$]X(a),X(b)\\rightarrow a\\neq b[/$]
        -
                uuid: 7d7195eb-5c3e-4eb7-8aa7-c19d580a4de5
                front: |
                        Definice: *Konzistentní* časová osa
                back: |
                        [$]\\Phi=(F,C)[/$] pro proměnnou [$]x[/$]:
                        konzistentní když [$]C[/$] je konzistentní
                        a pro každou dvojici výroků z [$]F[/$]
                        existuje separační podmínka, co je důsledek
                        [$]C[/$] (splněná v každém řešení [$]C[/$])
                        <br><br>
                        *Poznámka*: NESTAČÍ, aby separační podmínky
                        šly přidat do [$]C[/$] bez konfliktů. Musí být přímo
                        důsledkem!
        -
                uuid: 81856920-2ef7-4d5f-8d3b-ffa7d2e0606f
                markdown: false
                front: |
                        Definice: kronika podporuje časový výrok,
                        <i>podpora</i>, <i>pomocník</i>
                back: |
                        <i>Konzistentní</i> kronika [$]\Phi=(F,C)[/$]
                        podporuje výrok [$]\alpha\equiv x@t:(v,v')[/$]
                        nebo [$]x@[t,t'):v[/$] právě když:
                        <br><br>
                        Existuje [$]\beta\in F[/$] nastavující
                        hodnotu [$]v[/$] pro [$]\alpha[/$].
                        Taková [$]\beta[/$] je buď [$]x@\tau:(w',w)[/$], nebo
                        [$]x@[\tau',\tau):w[/$].
                        A existují separační podmínky [$]c[/$], že:
                        když [$]\delta\equiv(\{\alpha, x@[\tau,t):v\},
                                             \{w=v, \tau < t\}\cup c)[/$],
                        tak [$]\Phi\cup\delta[/$] je konzistentní kronika.
                        <br><br>
                        [$]\beta[/$]: <i>podpora</i> pro [$]\alpha[/$]
                        <br>
                        [$]\delta[/$]: <i>pomocník</i> (<i>enabler</i>) pro
                        [$]\alpha[/$]
        -
                uuid: 077f2748-7181-4d2c-b200-77042078487d
                front: |
                        Definice: Kronika podporuje množinu časových výroků
                        [$]\\varepsilon[/$], pomocník pro [$]\\varepsilon[/$]
                back: |
                        Každý výrok [$]\\alpha_i[/$] je podporován kronikou
                        [$] (F\\cup \\varepsilon-\\{\\alpha_i\\},C)[/$]
                        pomocníkem [$]\\delta_i[/$] takovým, že
                        [$]\\Phi\\cup\\Psi[/$]
                        je konzistentní kronika
                        ([$]\\Psi=\\bigcup_i \\delta_i[/$]).
                        <br><br>
                        Definice umožňuje *interferující efekty* &mdash;
                        přidané výroky se můžou navzájem podporovat.
                        <br><br>
                        [$]\\Psi[/$] je pomocník pro [$]\\varepsilon[/$]
                        (není jednoznačný)
        -
                uuid: b38cc4d1-e6ee-4c16-acbb-1266a03ef0ac
                front: |
                        Definice: Kronika podporuje jinou kroniku
                back: |
                        Ať je [$]\\Phi'=(F',C')[/$] kronika taková, že
                        [$]\\Phi[/$] podporuje [$]F'[/$].
                        <br><br>
                        Potom konzistentní kronika [$]\\Phi=(F,C)[/$]
                        *podporuje* kroniku [$]\\Phi'[/$]
                        právě když [$]\\Phi[/$] podporuje [$]F'[/$] a existuje
                        pomocník [$]\\varphi\\in\\theta(\\Phi'/\\Phi)[/$]
                        takový, že [$]\\Phi\\cup\\varphi[/$] je konzistentní
                        kronika.
        -
                uuid: 755cc706-e587-4d11-aa4e-6f7374c0aadc
                front: |
                        Definice: [$]\theta(\Phi'/\Phi)[/$]
                markdown: false
                back: |
                        [$]\theta=\{\varphi\cup(\varnothing,C'):
                        \varphi\ \text{je pomocnik pro}\ F'\}[/$]
                        <br><br>
                        ([$]\\Phi'=(F',C')[/$])
        -
                uuid: f727b71a-f1c9-480f-b2cc-5d8364341626
                front: |
                        Definice:
                        Kronika [$]\\Phi'[/$] je důsledek kroniky [$]\\Phi[/$]
                back: |
                        Právě když [$]\\Phi[/$] podporuje [$]\\Phi'[/$] a
                        existuje pomocník
                        [$]\\varphi\\in\\theta(\\Phi'/\\Phi)[/$]
                        takový, že [$]\\varphi\\subseteq\\Phi[/$].
        -
                uuid: ac248691-2945-41cb-855f-fbd3779d9a8d
                front: |
                        Jak vypadají plánovací operátory s časem?
                        Rozdíly od klasické reprezentace?
                back: |
                        [$]o = (\\mathrm{name}(o), (F(o), C(o)))[/$];
                        [$]\\mathrm{name}(o)[/$]: časové a objektové proměnné
                        operátoru, [$]F(o),C(o)[/$]: kronika.
                        <br><br>
                        Rozdíly: nejsou odlišeny předpoklady a efekty,
                        operátor se neaplikuje na stav ale na kroniku,
                        výsledek aplikace není jednoznačný
        -
                uuid: 68d5b374-70d3-4aa5-8fde-1d025fe38075
                front: Co je to akce?
                back: Částečně instanciovaný operátor
        -
                uuid: 71619576-3987-4247-9d8d-364ac273f367
                front: |
                        Definice: Aplikovatelnost akce
                back: |
                        [$]a=(F(a),C(a))[/$] aplikovatelná na kroniku
                        [$]\\Phi[/$], když ji [$]\\Phi[/$] podporuje.
        -
                uuid: 6f00dc18-349f-4255-a710-da9adab772ee
                front: Výsledek aplikace akce
                back: |
                        Množina kronik [$]\\gamma(\\Phi,a)=\\{\\Phi\\cup\\varphi
                        : \\varphi\\in\\theta(a/\\Phi)\\}[/$]
        -
                uuid: f1fd46ef-39ab-4777-8f2d-0818c985e074
                front: |
                        Definice: množina akcí aplikovatelná, výsledek aplikace
                markdown: false
                back: |
                        [$]\pi=\{a_1,\ldots a_n\}[/$] je aplikovatelná na [$]\Phi[/$],
                        když [$]\Phi[/$] podporuje kroniku
                        [$]\Phi_\pi=\bigcup_i (F(a_i),C(a_i))[/$]
                        <br><br>
                        Výsledek aplikace:
                        [$]\gamma(\Phi,\pi)=
                        \{\Phi\cup\varphi:\varphi\in\theta(\Phi_\pi/\Phi)\}[/$]
        -
                uuid: f3b7aad7-aab0-4f25-b177-cd7a89e38d14
                front: Co je plánovací problém?
                back: |
                        [$]P=(O,\\Phi_0,\\Phi_g)[/$].
                        [$]O[/$]: operátory, [$]\\Phi_0[/$]: neměnné relace a
                        očekávaný vývoj nezávislý na plánu,
                        [$]\\Phi_g[/$]: cíle (konzistentní kronika)
        -
                uuid: 671f4230-9131-4f1a-8d0b-7e2085040d50
                front: Co je řešící plán?
                back: |
                        Posloupnost akcí [$]\\pi[/$], že [$]\\Phi_g[/$]
                        je důsledek nějaké kroniky z
                        [$]\\gamma(\\Phi_0,\\pi)[/$].
        -
                uuid: 4253c990-3a2c-4de6-babc-1b835cd5098b
                front: Jak plánovat s kronikami
                back: |
                        Jako v prostoru plánů.
                        Otevřené cíle: na začátku cíle v [$]\\Phi_g[/$].
                        <br><br>
                        Jestli mám otevřený cíl:
                        pokud je podporován [$]\\Phi[/$], přidej jeho pomocníky
                        mezi hrozby.
                        Pokud není podporován, najdi akci, co ho podporuje,
                        a přidej ji.
                        <br><br>
                        Hrozby: dosud nevyřízené množiny pomocníků.
                        Vybereme jednoho, který je konzistentní s plánem,
                        a přidáme ho.
        -
                uuid: 0033da7a-d22d-408e-b268-7a97a7a31ffd
                topic: Plánování se zdroji
                front: |
                        Když plánujeme se zdroji, co uděláme se stavovými
                        proměnnými?
                back: |
                        Hodnoty nebudou binární, ale třeba počet volných
                        jeřábů. Zmenšuje to množství stejných
                        jeřábů. Zdroje se půjčují a vrací, takže se proměnná
                        mění relativně.
        -
                uuid: 1cbe743e-970d-4362-8801-241d9b417ae7
                topic: Plánování se zdroji
                front: Co je *kapacitní proměnná*?
                back: |
                        Profil zdroje (změna kapacity) v čase; obor
                        je numerický, změny jsou absolutní (a okamžité)
        -
                uuid: 8c9ea298-61ed-41a3-a46f-984f671da1dc
                topic: Plánování se zdroji
                front: |
                        Definice: Časové výroky pro zdroje
                back: |
                        Pokled, navýšení a půjčení kapacity: [$]z@t:-q[/$],
                        [$]z@t:+q[/$], [$]z@[t,t'):q[/$]
        -
                uuid: 59babd96-54a5-4b47-a878-8366d920633e
                topic: Plánování se zdroji
                front: |
                        Jakou informaci musíme přidat do domény,
                        když máme možnost přidávat a snižovat kapacitu?
                back: |
                        Maximální kapacitu každého zdroje
        -
                uuid: c504788d-ed42-4160-8aee-ae219d27cc51
                topic: Plánování se zdroji
                front: Co je plánovací operátor?
                back: |
                        Kronika, kronika jsou časové výroky a podmínky
        -
                uuid: 19f189ba-1739-47a9-b3a9-ead87da97509
                topic: Plánování se zdroji
                front: |
                        Kdy je množina časových výroků [$]R_z[/$] pro zdroj
                        [$]z[/$] konfliktní?
                back: |
                        Když existuje podmnožina
                        [$]\\{z@[t_i,t_i'):q_i : i\\in I\\}\\subseteq R_z[/$]
                        taková, že [$]\\sum_{i\\in I} q_i>Q[/$] a
                        výroky se výroky se mohou překrývat
                        (tj., je možné přiřadit časy tak, že
                        [$]\\bigcap_{i\\in I} [t_i,t_i')\\neq\\varnothing[/$]).
        -
                uuid: 0414efc0-70bb-4f8e-9041-c60774fc0d73
                topic: Plánování se zdroji
                front: Kdy je kronika konzistentní při plánování se zdroji?
                back: |
                        Když jsou všechny časové výroky nad stavovými proměnnými
                        konzistentní a žádná množina časových výroků
                        nad kapacitními proměnnými není konfliktní.
        -
                uuid: cb730f03-b238-4112-a485-e1cd7c0c023d
                front: |
                        Když mám intervaly [$]\\{I_i\\}[/$], kdy je
                        [$]\\bigcap_i I_i\\neq\\varnothing[/$]?
                back: |
                        Právě se každá dvojice intervalů protíná.
        -
                uuid: 5634d76a-ec35-4098-9863-7cee1d8d6f9f
                topic: Plánování se zdroji
                front: Jak hledat zdrojové konflikty?
                back: |
                        Graf: protínající se časové výroky spojeny hranami.
                        Hledáme nejmenší kliku, že
                        [$]\\sum_{i\\in U}q_i>Q[/$].
                        Té se říká *minimální kritická množina*
                        (MCS).
        -
                uuid: 5b5d3c1b-3597-4637-a41e-76329e22836e
                topic: Plánování se zdroji
                front: Jak opravit konflikty?
                back: |
                        Vezmu minimální kritickou množinu a vyberu
                        opravu, co jeden z intervalů posune mimo průnik.
                        <br><br>
                        Je dobré použít opravy, co jsou minimálně silné
                        (protože některé opravy implikují jiné).
                        <br><br>
                        Bacha abych nevyrobil konflikt.
        -
                uuid: bfa05834-a813-4413-ba8b-dff31e0ba93b
                front: Jak plánovat se zdroji
                back: |
                        K plánování s kronikami přidáme práci s minimálními
                        konfliktními množinami a odstraňování zdrojových
                        konfliktů.
